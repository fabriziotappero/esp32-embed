<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>ESP32_epaper_u8g2: README</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ESP32_epaper_u8g2
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">ESP32&nbsp;Test&nbsp;with&nbsp;epaper&nbsp;displays&nbsp;and&nbsp;u8g2</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('md_README.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">README </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>#ESP32 U8G2 library support There is an excellent open source library called <code>u8g2</code> that can be found on Github here:</p>
<p><a href="https://github.com/olikraus/u8g2">https://github.com/olikraus/u8g2</a></p>
<p>The purpose of the library is to provide a display independent driver layer for monochrome displays including LCD and OLED. The library "knows" how to driver the underlying displays as well as providing drawing primitives including text, fonts, lines and other geometrical shapes.</p>
<p>A version of the library is available in cleanly compiling C and compiles without incident on the ESP32-IDF framework.</p>
<p>However, since the library is agnostic of MCU environments and will work on a variety of boards, there has to be a mapping from the functions expected by the library and the underlying MCU board hardware. This includes driving GPIOs, I2C, SPI and more.</p>
<p>The code in this folder provides a mapping from U8g2 to the ESP32 ESP-IDF. This should be included in your build of U8g2 applications.</p>
<p>To use with the ESP32, we must invoke the <code>u8g2_esp32_hal_init()</code> function before invoking any of the normal U8g2 functons. What this call does is tell the ESP32 what pins we wish to map. Here is an example of use:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;u8g2_esp32_hal_t u8g2_esp32_hal = U8G2_ESP32_HAL_DEFAULT;</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;u8g2_esp32_hal.clk   = PIN_CLK;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;u8g2_esp32_hal.mosi  = PIN_MOSI;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;u8g2_esp32_hal.cs    = PIN_CS;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;u8g2_esp32_hal.dc    = PIN_DC;</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;u8g2_esp32_hal.reset = PIN_RESET;</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;u8g2_esp32_hal_init(u8g2_esp32_hal);</div></div><!-- fragment --><p>The function takes as input a <code>u8g2_esp32_hal</code> structure instance which has the logical pins that U8g2 needs mapped to the physical pin on the ESP32 that we wish to use. If we don't use a specific pin for our specific display, set the value to be <code>U8G2_ESP32_HAL_UNDEFINED</code> which is the default initialization value.</p>
<p>Remember, ESP32 pins are not hard-coded to functions and as such, all the GPIO pins on the ESP32 are open for use. Following this initialization, we can use U8g2 as normal and described in the U8g2 documentation.</p>
<h2>Compiling U8G2</h2>
<p>To use the actual U8g2 library in your ESP32 project, perform the following steps:</p>
<ol type="1">
<li>Create a directory called <code>components</code> in your main project directory.</li>
<li>Change into the <code>components</code> directory.</li>
<li>Run <code>git clone <a href="https://github.com/olikraus/u8g2.git">https://github.com/olikraus/u8g2.git</a></code> to bring in a the latest copy of u8g2 library.</li>
<li>Change into the <code>u8g2</code> directory.</li>
<li>Create a file called <code>component.mk</code></li>
<li>Enter the following in the <code>component.mk</code> file: <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;COMPONENT_SRCDIRS:=csrc</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;COMPONENT_ADD_INCLUDEDIRS:=csrc</div></div><!-- fragment --></li>
</ol>
<h2>Development</h2>
<p>While in principal, there should be nothing specific needed beyond this addition to make U8g2 work on the ESP32, only a small number of boards have been tested. In addition, currently only SPI displays have been tested. This will be remidied over time. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<html lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<noscript>
<meta HTTP-EQUIV="REFRESH" CONTENT="0;URL=index.jsp?noscript=1">
</noscript>
<title>pcbreflux</title>
<body>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
Â© pcbreflux 2017   
  </ul>
</div>
</body>
</html>
